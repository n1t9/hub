<div data-menu-target="menubg" class="hidden fixed inset-0 bg-black opacity-50 z-40"></div>
<div data-menu-target="menu" class="fixed inset-y-0 right-0 w-5/6 md:w-1/2 lg:w-1/3 bg-white shadow-lg px-4 py-3 z-50 transform translate-x-full transition-transform duration-300 ease-in-out">
  <div class="flex justify-end">
    <button data-action="click->menu#close" class="flex flex-col items-center text-center">
      <span class="material-icons-outlined">
        close
      </span>
      <span class="text-xs font-medium">とじる</span>
    </button>
  </div>
  <div class="mt-8 max-w-sm mx-auto">
    <% if current_user %>
      <div class="py-2">
        <%= link_to user_path(current_user.id) do %>
          <div class="flex items-center">
            <div class="mr-4">
              <%= image_tag current_user.display_profile_image, class: "w-10 h-10 rounded-full object-cover" %>
            </div>
            <div>
              <h5 class="text-xl font-bold tracking-tight"><%= current_user.display_name %></h5>
              <p class="text-xs text-gray-700">プロフィールを見る</p>
            </div>
            <div class="justify-end ml-auto items-center">
              <span class="material-icons-outlined">
                chevron_right
              </span>
            </div>
          </div>
          <hr class="mt-4 mb-10">
          <div>
            <%= link_to t("helpers.following_pages.title"), following_pages_path, class: "block text-gray-700 mt-2" %>
            <hr class="my-4">
            <a href="#" class="block text-gray-700 mt-2">ブックマークしたポスト</a>
            <hr class="my-4">
            <%= link_to t("helpers.pages.mypages"), mypages_path, class: "block text-gray-700 mt-2" %>
            <hr class="my-4">
            <%= link_to t("helpers.setting.title"), settings_path, class: "block text-gray-700 mt-2" %>
            <hr class="my-4">
            <%= button_to "ログアウト", signout_path, method: :post, class: "w-full text-gray-700 rounded border py-2" %>
            <%= render "shared/feedback_gray" %>
          </div>
        <% end %>
      </div>
    <% else %>
      <div class="py-2">
        <h4 class="text-xl text-center my-4">もっと見るには、<br>
          ログインが必要です</h4>
        <p class="text-md text-center my-2">ログインまたは会員登録してください。</p>
        <div class="flex-row flex space-x-2 mt-8">
          <%= link_to t("helpers.signup.title"), signup_path, class: "flex-1 bg-blue-500 text-white font-bold py-2 px-4 rounded text-center" %>
          <%= link_to t("helpers.signin.title"), signin_path, class: "flex-1 border font-bold py-2 px-4 rounded text-center" %>
        </div>
        <%= render "shared/feedback_gray" %>
      </div>
    <% end %>
  </div>
</div>
